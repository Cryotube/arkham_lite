[gd_scene load_steps=6 format=3 uid="uid://runhud"]

[ext_resource type="Script" path="res://scripts/ui/run_hud_controller.gd" id="1"]
[ext_resource type="PackedScene" path="res://scenes/dice/dice_viewport.tscn" id="2"]
[ext_resource type="PackedScene" path="res://scenes/ui/resource_panel.tscn" id="3"]
[ext_resource type="Script" path="res://scripts/ui/equipment_tab_controller.gd" id="4"]

[node name="RunHUD" type="Control"]
anchors_preset = 15
anchor_left = 0.0
anchor_top = 0.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 0.0
offset_top = 0.0
offset_right = 0.0
offset_bottom = 0.0
script = ExtResource("1")

[node name="MainLayout" type="VBoxContainer" parent="."]
anchors_preset = 8
anchor_left = 0.05
anchor_top = 0.05
anchor_right = 0.95
anchor_bottom = 0.95
offset_left = 0.0
offset_top = 0.0
offset_right = 0.0
offset_bottom = 6.10352e-05
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="ResourcePanel" parent="MainLayout" instance=ExtResource("3")]

[node name="MainBody" type="HSplitContainer" parent="MainLayout"]
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="LeftDock" type="VBoxContainer" parent="MainLayout/MainBody"]
custom_minimum_size = Vector2(200, 0)
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="RoomsHeader" type="Label" parent="MainLayout/MainBody/LeftDock"]
text = "Room Queue"

[node name="RoomList" type="VBoxContainer" parent="MainLayout/MainBody/LeftDock"]
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="RoomPlaceholder" type="Label" parent="MainLayout/MainBody/LeftDock/RoomList"]
text = "No rooms available."

[node name="ThreatHeader" type="Label" parent="MainLayout/MainBody/LeftDock"]
text = "Threats"
theme_override_colors/font_color = Color(1, 0.870588, 0.701961, 1)

[node name="ThreatList" type="VBoxContainer" parent="MainLayout/MainBody/LeftDock"]
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="ThreatPlaceholder" type="Label" parent="MainLayout/MainBody/LeftDock/ThreatList"]
text = "No active threats."

[node name="RightColumn" type="VBoxContainer" parent="MainLayout/MainBody"]
size_flags_horizontal = 3
size_flags_vertical = 3
separation = 12

[node name="ContextHeader" type="Label" parent="MainLayout/MainBody/RightColumn"]
text = "Context"

[node name="ContextInfo" type="RichTextLabel" parent="MainLayout/MainBody/RightColumn"]
size_flags_horizontal = 3
size_flags_vertical = 3
text = "Select a room or threat to view details."
fit_content = true

[node name="ContextActions" type="HBoxContainer" parent="MainLayout/MainBody/RightColumn"]
alignment = 1
separation = 12

[node name="EnterButton" type="Button" parent="MainLayout/MainBody/RightColumn/ContextActions"]
text = "Enter Top Room"

[node name="CycleButton" type="Button" parent="MainLayout/MainBody/RightColumn/ContextActions"]
text = "Cycle Top Room"

[node name="ScoutButton" type="Button" parent="MainLayout/MainBody/RightColumn/ContextActions"]
text = "Scout Top Room"

[node name="TabContainer" type="TabContainer" parent="MainLayout/MainBody/RightColumn"]
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="Actions" type="VBoxContainer" parent="MainLayout/MainBody/RightColumn/TabContainer"]
visible = true

[node name="ActionsHeader" type="Label" parent="MainLayout/MainBody/RightColumn/TabContainer/Actions"]
text = "Actions"

[node name="ActionsPlaceholder" type="Label" parent="MainLayout/MainBody/RightColumn/TabContainer/Actions"]
text = "Action economy hooks pending implementation."

[node name="Equipment" type="VBoxContainer" parent="MainLayout/MainBody/RightColumn/TabContainer"]
script = ExtResource("4")
separation = 8

[node name="Toolbar" type="HBoxContainer" parent="MainLayout/MainBody/RightColumn/TabContainer/Equipment"]
alignment = 1
separation = 12

[node name="RotateLeftButton" type="Button" parent="MainLayout/MainBody/RightColumn/TabContainer/Equipment/Toolbar"]
text = "Rotate ↺"

[node name="RotateRightButton" type="Button" parent="MainLayout/MainBody/RightColumn/TabContainer/Equipment/Toolbar"]
text = "Rotate ↻"

[node name="RemoveButton" type="Button" parent="MainLayout/MainBody/RightColumn/TabContainer/Equipment/Toolbar"]
text = "Remove"

[node name="ClearButton" type="Button" parent="MainLayout/MainBody/RightColumn/TabContainer/Equipment/Toolbar"]
text = "Clear Installed"

[node name="Content" type="HSplitContainer" parent="MainLayout/MainBody/RightColumn/TabContainer/Equipment"]
size_flags_horizontal = 3
size_flags_vertical = 3
split_offset = 280

[node name="GridPanel" type="VBoxContainer" parent="MainLayout/MainBody/RightColumn/TabContainer/Equipment/Content"]
size_flags_horizontal = 3
size_flags_vertical = 3
separation = 6

[node name="GridHeader" type="Label" parent="MainLayout/MainBody/RightColumn/TabContainer/Equipment/Content/GridPanel"]
text = "Matrix Grid"

[node name="MatrixGrid" type="GridContainer" parent="MainLayout/MainBody/RightColumn/TabContainer/Equipment/Content/GridPanel"]
columns = 6
custom_minimum_size = Vector2(360, 240)
theme_override_constants/h_separation = 6
theme_override_constants/v_separation = 6

[node name="InventoryPanel" type="VBoxContainer" parent="MainLayout/MainBody/RightColumn/TabContainer/Equipment/Content"]
size_flags_horizontal = 3
size_flags_vertical = 3
separation = 6

[node name="InventoryHeader" type="Label" parent="MainLayout/MainBody/RightColumn/TabContainer/Equipment/Content/InventoryPanel"]
text = "Carried Equipment"

[node name="BurdenPanel" type="HBoxContainer" parent="MainLayout/MainBody/RightColumn/TabContainer/Equipment/Content/InventoryPanel"]
size_flags_horizontal = 3
alignment = 1
separation = 8

[node name="BurdenProgress" type="ProgressBar" parent="MainLayout/MainBody/RightColumn/TabContainer/Equipment/Content/InventoryPanel/BurdenPanel"]
size_flags_horizontal = 3
max_value = 12.0
value = 0.0

[node name="BurdenValue" type="Label" parent="MainLayout/MainBody/RightColumn/TabContainer/Equipment/Content/InventoryPanel/BurdenPanel"]
text = "0 load"

[node name="BurdenState" type="Label" parent="MainLayout/MainBody/RightColumn/TabContainer/Equipment/Content/InventoryPanel/BurdenPanel"]
text = "Safe"

[node name="HintLabel" type="Label" parent="MainLayout/MainBody/RightColumn/TabContainer/Equipment/Content/InventoryPanel"]
size_flags_horizontal = 3
autowrap_mode = 1
text = "Select equipment to preview placement."

[node name="InventoryScroll" type="ScrollContainer" parent="MainLayout/MainBody/RightColumn/TabContainer/Equipment/Content/InventoryPanel"]
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="InventoryList" type="VBoxContainer" parent="MainLayout/MainBody/RightColumn/TabContainer/Equipment/Content/InventoryPanel/InventoryScroll"]
size_flags_horizontal = 3
size_flags_vertical = 1
separation = 4

[node name="DiceSection" type="VBoxContainer" parent="MainLayout"]
size_flags_horizontal = 3
size_flags_vertical = 2
separation = 6

[node name="DiceViewportContainer" parent="MainLayout/DiceSection" instance=ExtResource("2")]

[node name="DiceValues" type="HBoxContainer" parent="MainLayout/DiceSection"]
size_flags_horizontal = 3

[node name="Die0" type="Label" parent="MainLayout/DiceSection/DiceValues"]
text = "Die A: 1"

[node name="Die1" type="Label" parent="MainLayout/DiceSection/DiceValues"]
text = "Die B: 1"

[node name="Die2" type="Label" parent="MainLayout/DiceSection/DiceValues"]
text = "Die C: 1"

[node name="LockRow" type="HBoxContainer" parent="MainLayout/DiceSection"]

[node name="Lock0" type="Button" parent="MainLayout/DiceSection/LockRow"]
text = "Lock A"

[node name="Lock1" type="Button" parent="MainLayout/DiceSection/LockRow"]
text = "Lock B"

[node name="Lock2" type="Button" parent="MainLayout/DiceSection/LockRow"]
text = "Lock C"

[node name="ActionButtons" type="HBoxContainer" parent="MainLayout/DiceSection"]

[node name="RollButton" type="Button" parent="MainLayout/DiceSection/ActionButtons"]
text = "Roll"

[node name="ConfirmButton" type="Button" parent="MainLayout/DiceSection/ActionButtons"]
text = "Confirm"

[node name="ExhaustTray" type="HBoxContainer" parent="MainLayout/DiceSection"]

[node name="ExhaustLabel" type="Label" parent="MainLayout/DiceSection/ExhaustTray"]
text = "Exhausted Dice: none"

[node name="MessageBanner" type="PanelContainer" parent="MainLayout"]
visible = false
custom_minimum_size = Vector2(0, 42)

[node name="BannerVBox" type="VBoxContainer" parent="MainLayout/MessageBanner"]
size_flags_horizontal = 3

[node name="BannerLabel" type="Label" parent="MainLayout/MessageBanner/BannerVBox"]
text = "Status message"
horizontal_alignment = 1

[node name="MessageTimer" type="Timer" parent="MainLayout"]
wait_time = 3.0
one_shot = true

[node name="EventOverlay" type="PanelContainer" parent="."]
visible = false
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
offset_left = 200.0
offset_top = 120.0
offset_right = -200.0
offset_bottom = -120.0

[node name="EventVBox" type="VBoxContainer" parent="EventOverlay"]
size_flags_horizontal = 3
size_flags_vertical = 3
custom_minimum_size = Vector2(0, 260)
separation = 12

[node name="EventTitle" type="Label" parent="EventOverlay/EventVBox"]
text = "Milestone Event"
horizontal_alignment = 1

[node name="EventBody" type="RichTextLabel" parent="EventOverlay/EventVBox"]
size_flags_horizontal = 3
size_flags_vertical = 3
fit_content = true
text = "Event description."

[node name="Choices" type="VBoxContainer" parent="EventOverlay/EventVBox"]
size_flags_horizontal = 3
alignment = 1
separation = 8

[node name="TutorialOverlay" type="PanelContainer" parent="."]
visible = false
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
offset_left = 240.0
offset_top = 140.0
offset_right = -240.0
offset_bottom = -140.0

[node name="TutorialVBox" type="VBoxContainer" parent="TutorialOverlay"]
size_flags_horizontal = 3
size_flags_vertical = 3
custom_minimum_size = Vector2(0, 200)
separation = 12

[node name="TutorialTitle" type="Label" parent="TutorialOverlay/TutorialVBox"]
text = "Tutorial"
horizontal_alignment = 1

[node name="TutorialBody" type="RichTextLabel" parent="TutorialOverlay/TutorialVBox"]
size_flags_horizontal = 3
size_flags_vertical = 3
fit_content = true
text = ""

[node name="TutorialActions" type="HBoxContainer" parent="TutorialOverlay/TutorialVBox"]
alignment = 1
separation = 16

[node name="TutorialSkip" type="Button" parent="TutorialOverlay/TutorialVBox/TutorialActions"]
text = "Skip"

[node name="TutorialNext" type="Button" parent="TutorialOverlay/TutorialVBox/TutorialActions"]
text = "Next"
